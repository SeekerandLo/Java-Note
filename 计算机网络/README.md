## 网络知识部分

### 五层协议栈 和 七层协议栈

- 五层协议栈：物理层、链路层、网络层、传输层、应用层

- 七层协议栈：物理层、链路层、网络层、传输层、会话层、表示层、应用层

```java
第一层：物理层
第二层：数据链路层 802.2、802.3ATM、HDLC、FRAME RELAY、交换机 
第三层：网络层 IP、IPX、APPLETALK、ICMP、路由器
第四层：传输层 TCP、UDP、SPX 
第五层：会话层 RPC、SQL、NFS 、X WINDOWS、ASP
第六层：表示层 ASCLL、PICT、TIFF、JPEG、 MIDI、MPEG 
第七层：应用层 HTTP,FTP,SNMP等
```

## 网络层


## 传输层

### TCP 报文结构

### TCP和UDP的特点
- TCP 是全双工的，面向连接的，提供可靠交付

    - **什么是全双工**  
    全双工（Full Duplex）是通讯传输的一个术语。通信允许数据在两个方向上同时传输，它在能力上相当于两个单工通信方式的结合。全双工指可以同时（瞬时）进行信号的双向传输（A→B且B→A）。指A→B的同时B→A，是瞬时同步的。
    如：电话通信

    - **半双工**  
    半双工（Half Duplex），所谓半双工就是指一个时间段内只有一个动作发生，举个简单例子，一条窄窄的马路，同时只能有一辆车通过，当目前有两辆车对开，这种情况下就只能一辆先过，等到头儿后另一辆再开，这个例子就形象的说明了半双工的原理。早期的对讲机、以及早期集线器等设备都是基于半双工的产品。随着技术的不断进步，半双工会逐渐退出历史舞台。
    如：对讲机

    - **单工**
    单工数据传输只支持数据在一个方向上传输；在同一时间只有一方能接受或发送信息，不能实现双向通信，举例：电视，广播。

- UDP 是半双工的，无连接，尽最大可能的交付

### TCP与UDP的区别
- TCP 和 UDP 都是传输层的协议，用于数据传输

- TCP 是全双工的，什么是全双工，


### TCP的三次握手
`TCP`
- A 为客户端，B 为服务端。其次要了解 TCP 的报文格式：SYN，ACK，FIN等

- B为监听状态，等待连接

- （第一次握手）A发送**请求连接**请求，SYN = 1，ACK = 0(表示这是一个请求连接请求)，选择一个初始序列号x

- （第二次握手）B收到**请求连接**请求，**同意连接，发送响应报文**，SYN = 1，ACK = 1，确认号 x+1，同时选择一个初始序列号 y

- （第三次握手）A收到B发送的**同意连接**请求，现在发送**确认**请求，确认号为 y+1，序号为 x+1，ACK = 1

- B收到A的确认请求，连接建立，此时连接通道建立，两端可以互相发送消息

### 为什么要三次握手
&emsp;&emsp;在两次握手之后，已经建立了连接，那么为什么还要第三次握手呢？  
&emsp;&emsp;三次握手是为了防止失效的连接请求到达服务器端。  

&emsp;&emsp;客户端发送的请求可能在网络中滞留，当一段时间(**等待重传时间**)，客户端没有收到服务器端发来的确认请求，就会重新发送。最终，这两个请求都会到达服务器端，如果没有三次握手，服务器就会创建两个连接。如果有三次握手，服务器就会忽略掉那个在网络中滞留的请求，因为重新发送，序列号不同。

### TCP的四次挥手
`TCP`
- A 为客户端，B 为服务端。

- （第一次挥手）A 发送**连接释放**请求，FIN = 1

- （第二次挥手）B 收到 A 发送的请求，发送**确认**请求，此时连接半关闭，A 向 B 的连接已经关闭，但是 B 向 A 的连接还未关闭

- （第三次挥手）待 B 发送完数据之后，发送**连接释放**请求，FIN = 1

- （第四次挥手）A 收到 B 发送的请求，发送**确认**

- B 收到 A 的确认后连接关闭

### 为什么要四次挥手

- 为了确保数据能够完成传输，当收到对方的 FIN 报文后，仅仅代表对方已经没有数据要发送了，但是己方可能还有未完成的数据，释放连接也需要自己主动释放。

- 客户端发送完连接释放之后，服务端发送确认，此时服务器端进入到 Close-Wait 状态，待将数据发送完毕后，服务端也发送连接释放请求

### 第二到第三次挥手之间服务器在做什么？最后一次挥手，客户端与服务端的状态

- 第二次挥手，服务器发送确认报文给客户端，此时客户端到服务器端的连接关闭，
服务器端处理 Close-Wait 阶段，发送还没有发送完的数据

- 最后一次挥手，客户端发送确认报文给服务端，确认连接关闭，客户端处于 TIME-WAIT，等待 2MSL 时间后变为 CLOSED 状态，服务端收到确认报文，变成 CLOSED 状态

### TCP 连接中的状态

#### 三次握手

- SYN-SEND

- LISTEN

- SYN-RCVD

- ESTABLISHED

#### 四次挥手

- FIN-WAIT1

- FIN-WAIT2

- CLOSE-WAIT

- TIME-WAIT

- LAST-ACK

## 应用层

### HTTP协议
&emsp;&emsp;超文本传输协议，规定了浏览器和万维网(WWW = World Wide Web)服务器之间互相通信的规则，通过因特网传送万维网文档的数据传送协议。允许将超文本标记语言(HTML)从web服务器发送至客户端的浏览器

### HTTPS协议
&emsp;&emsp;超文本传输安全协议，以安全为目标的HTTP通道  
&emsp;&emsp;HTTP 加入 SSL 层，HTTPS 的安全基础就是 SSL，因此加密的详细内容就需要 SSL。HTTPS 在 HTTP 的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。
- **SSL：安全套接层**
    - SSL协议位于TCP/IP协议与各种应用层协议之间，为数据通讯提供安全支持

    - SSL协议分为两层：SSL记录协议，SSL握手协议

    - SSL记录协议，建立在可靠的传输协议之上，为高层协议提供数据封装、压缩、加密等基本功能的支持。

    - SSL握手协议，它建立在SSL记录协议之上，用于在实际的数据传输开始前，通讯双方进行身份认证、协商加密算法、交换加密密钥等

    - SSL运行在TCP/IP层之上、应用层之下，为应用程序提供加密数据通道，它采用了RC4、MD5以及RSA等加密算法，使用40 位的密钥，适用于商业信息的加密

- **TLS：传输层安全** 
    - TLS是SSL的标准化后的产物

    - TLS协议分为两层：TLS记录协议，TLS握手协议

### HTTPS与HTTP的区别

- HTTPS 在 HTTP 协议的基础上增加了 SSL/TLS 数据加密，保护数据不被泄露，窃取

### HTTPS是如何加密解密的

- 

### 输入一个URL，过程是怎么样的


### 跨域问题，原理，如何解决


### 反向代理原理，使用过什么软件吗