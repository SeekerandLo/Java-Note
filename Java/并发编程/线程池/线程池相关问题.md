## çº¿ç¨‹æ± ç›¸å…³é—®é¢˜

### ä¸ºä»€ä¹ˆè¦ç”¨çº¿ç¨‹æ± 

1. é™ä½èµ„æºæ¶ˆè€—ï¼Œå› ä¸ºçº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯ä¼šæ¶ˆè€—è¾ƒå¤šçš„èµ„æºï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥é€šè¿‡é‡å¤åˆ©ç”¨çº¿ç¨‹ï¼Œé™ä½èµ„æºæ¶ˆè€—ã€‚

2. æé«˜å“åº”é€Ÿåº¦ï¼Œå¦‚æœæœ‰ä»»åŠ¡åˆ°äº†ï¼Œä¸éœ€è¦åˆ›å»ºçº¿ç¨‹ï¼Œå¯ä»¥ç›´æ¥å»çº¿ç¨‹æ± ä¸­æå–ã€‚

3. æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ï¼Œ

### ThreadPoolExecutor å‚æ•°ä»‹ç»
```java
public ThreadPoolExecutor(int corePoolSize,
                        int maximumPoolSize,
                        int keepAliveTime,
                        TimeUnit unit,
                        BlockingQueue<Runnable> workQueue,
                        ThreadFactory threadFactory,
                        RejectedExecutionHandler handler)
```
- corePoolSizeï¼š**å¸¸é©»æ ¸å¿ƒçº¿ç¨‹æ•°**ï¼Œå¦‚æœç­‰äº0ï¼Œåˆ™ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¼šé”€æ¯çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ã€‚å¦‚æœå¤§äº0ï¼Œä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¹Ÿä¸ä¼šè¢«é”€æ¯ã€‚

- maximumPoolSize: çº¿ç¨‹æ± å…è®¸çš„èƒ½å¤ŸåŒæ—¶æ‰§è¡Œçš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œ

- keepAliveTime: å…è®¸çº¿ç¨‹ç©ºé—²æ—¶é—´ï¼Œå½“çº¿ç¨‹çš„ç©ºé—²æ—¶é—´è¶…è¿‡ keepAliveTime æ—¶é—´å°±å°†çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å‡å°‘åˆ° corePoolSize ä¸ª

- unit: ç©ºé—²æ—¶é—´çš„å•ä½

- workQueue: å½“è¯·æ±‚çš„çº¿ç¨‹æ•°å¤§äºçº¿ç¨‹æ± çš„æœ€å¤§å®¹é‡ï¼Œåˆ™å°†çº¿ç¨‹æ”¾åˆ°é˜»å¡é˜Ÿåˆ—ä¸­

- threadFactory: çº¿ç¨‹åˆ›å»ºå·¥ç¨‹ï¼Œç”¨æ¥ç”Ÿæˆä¸€ç»„å…·æœ‰ç›¸åŒä»»åŠ¡çš„çº¿ç¨‹

- hander: æ‹’ç»ç­–ç•¥æ‰§è¡Œå™¨ï¼Œå½“é˜»å¡é˜Ÿåˆ—æ»¡äº†çš„æ—¶å€™ï¼Œé€šè¿‡æ‹’ç»ç­–ç•¥å¤„ç†æäº¤çš„æ–°ä»»åŠ¡

### ğŸ˜¥ThreadPoolExceutor çš„ä½¿ç”¨

### ğŸ˜¥BlockingQueue

### ğŸ˜¥TheadFactory

### RejectedExecutionHandler

1. AbortPolicy: ç»ˆæ­¢ç­–ç•¥ï¼Œç›´æ¥æŠ›å‡ºå¼‚å¸¸

2. CallerRunsPolicy: è°ƒç”¨ä»»åŠ¡çš„ run æ–¹æ³•ï¼Œä¸é€šè¿‡çº¿ç¨‹æ± ï¼Œç›´æ¥æ‰§è¡Œ

3. DiscardOldestPolicy: ä¸¢å¼ƒé˜Ÿåˆ—ä¸­ç­‰å¾…æœ€ä¹…çš„ä»»åŠ¡ï¼Œç„¶åæŠŠå½“å‰ä»»åŠ¡åŠ åˆ°é˜Ÿåˆ—ä¸­

4. DiscardPolicy: ä¸¢å¼ƒä»»åŠ¡ï¼Œè¿˜ä¸æŠ›å¼‚å¸¸ï¼Œä¸æ¨è


### å·²ç»æä¾›çš„çº¿ç¨‹æ± 

1. newCachedThreadPool: å¤§å°å¯ä¼¸ç¼©çš„çº¿ç¨‹æ± ï¼ŒmaximunPoolSize æœ€é«˜å¯è¾¾ Integer.Max_Valueã€‚å¸¸é©»æ ¸å¿ƒçº¿ç¨‹ä¸º0ï¼Œå½“çº¿ç¨‹æ± ä¸­çº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡ 60s åå°±å°†çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å…¨éƒ¨é”€æ¯

    ```java
    public static ExecutorService newCachedThreadPool() {
            return new ThreadPoolExecutor(0, Integer.MAX_VALUE,
                                        60L, TimeUnit.SECONDS,
                                        new SynchronousQueue<Runnable>());
        }
    ```

2. newFixedThreadPool: åˆ›å»ºä¸€ä¸ªæœ‰å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°ç›¸åŒï¼Œä¸éœ€è¦ç©ºé—²æ—¶é—´
    ```java
    public static ExecutorService newFixedThreadPool(int nThreads) {
        return new ThreadPoolExecutor(nThreads, nThreads,
                                      0L, TimeUnit.MILLISECONDS,
                                      new LinkedBlockingQueue<Runnable>());
    }
    ```

3. newSingleThreadPool: åˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œå¸¸é©»æ ¸å¿ƒçº¿ç¨‹å’Œæœ€å¤§çº¿ç¨‹æ•°éƒ½æ˜¯ 1ï¼Œä¸éœ€è¦ç©ºé—²æ—¶é—´
    ```java
    public static ExecutorService newSingleThreadExecutor() {
        return new FinalizableDelegatedExecutorService
            (new ThreadPoolExecutor(1, 1,
                                    0L, TimeUnit.MILLISECONDS,
                                    new LinkedBlockingQueue<Runnable>()));
    }
    ```

4. newScheduleThreadPool: æ”¯æŒ**å®šæ—¶å’Œå‘¨æœŸæ€§ä»»åŠ¡**æ‰§è¡Œï¼Œçº¿ç¨‹æ•°æœ€å¤§åˆ° Integer.MAX_VALUEï¼Œä¸ newCachedThreadPool çš„åŒºåˆ«æ˜¯ä¸å›æ”¶å·¥ä½œçº¿ç¨‹

    ```java
    public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize) {
        return new ScheduledThreadPoolExecutor(corePoolSize);
    }

    public ScheduledThreadPoolExecutor(int corePoolSize) {
        // è°ƒç”¨ ThreadPoolExecutor çš„æ„é€ å™¨
        super(corePoolSize, Integer.MAX_VALUE, 0, NANOSECONDS,
              new DelayedWorkQueue());
    }
    ```

5. newWorkStealingPool: åˆ›å»ºæœ‰è¶³å¤Ÿçº¿ç¨‹çš„çº¿ç¨‹æ± æ”¯æŒç»™å®šçš„å¹¶è¡Œåº¦ï¼Œå¹¶é€šè¿‡ä½¿ç”¨å¤šä¸ªé˜Ÿåˆ—å‡å°‘ç«äº‰

    ```java
    public static ExecutorService newWorkStealingPool() {
        return new ForkJoinPool
            (Runtime.getRuntime().availableProcessors(),
             ForkJoinPool.defaultForkJoinWorkerThreadFactory,
             null, true);
    }
    ```

### ğŸ˜¥çº¿ç¨‹æ± çš„åŸç†
