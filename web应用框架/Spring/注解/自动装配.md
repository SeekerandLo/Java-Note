## Bean è‡ªåŠ¨è£…é…ç¯‡

1. [è‡ªåŠ¨è£…é… @AutoWired](#è‡ªåŠ¨è£…é…-@AutoWired)

2. [è‡ªåŠ¨è£…é… @Resource](#è‡ªåŠ¨è£…é…-@Resource)

3. [è‡ªåŠ¨è£…é… @Inject](#è‡ªåŠ¨è£…é…-@Inject)


### è‡ªåŠ¨è£…é… @AutoWired
- åŸç†ï¼šç›¸å½“äºä½¿ç”¨ ApplicationContext.getBean(*.class);

    1. é»˜è®¤ä¼˜å…ˆä½¿ç”¨ applicationContext.getBean(Bean.class)
    
    2. å¦‚æœæ‰¾åˆ°å¤šä¸ªç›¸åŒç±»å‹çš„ç»„ä»¶ï¼Œå†å°†å±æ€§çš„åç§°ä½œä¸ºidåœ¨å®¹å™¨ä¸­æŸ¥æ‰¾ applicationContext.getBean("BeanName")

    3. æˆ–è€…ä½¿ç”¨ **@Qualifier** æŒ‡å®šè£…é…çš„ç»„ä»¶

    4. å½“æ—¶æœ‰è‡ªåŠ¨è£…é…æ—¶åº”ä¿è¯èƒ½æ‰¾åˆ°æ­¤ç»„ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚æˆ–è€…ä½¿ç”¨ @AutoWired çš„ `required` å±æ€§ï¼Œè®¾ç½®ä¸º `false`ï¼Œå¯ä»¥ä¸å¿…é¡»åŠ è½½ Bean

    5. @Primary æŒ‡å®šä¼˜å…ˆçº§

- ä½ç½®
    - å±æ€§ï¼šåŠ åœ¨å±æ€§ä¸Šï¼Œæœ€å¸¸è§

    - æ–¹æ³•ï¼š
    1. åŠ åœ¨ Set æ–¹æ³•ï¼Œä» IoC å®¹å™¨ä¸­å¯»æ‰¾ç»„ä»¶ï¼Œç„¶å Set è¿›å»
        ```java
        // æŸServiceç±»ä¸‹

        // å±æ€§
        private Bean bean;

        // æ–¹æ³•
        @AutiWired
        public void setBean(Bean bean){
            this.bean = bean
        }
        ```
            
    2. @Bean + æ–¹æ³•å‚æ•°ï¼Œçœç•¥ @AutoWired
        ```java
        @Bean
        public InjectionBeanService injectionBeanService(Bean bean) {
            InjectionBeanService service = new InjectionBeanService();
            service.setBean(bean);
            return service;
        }
        ```


    - æ„é€ å™¨ï¼šåŠ è½½æ„é€ å™¨ä¸­ï¼Œæ„é€ å™¨çš„å‚æ•°æ˜¯ IoC å®¹å™¨ä¸­çš„ç»„ä»¶ã€‚  
    å¦‚æœç»„ä»¶åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨ï¼Œè¿™ä¸ªæœ‰å‚æ„é€ å™¨çš„ @AutoWired å¯ä»¥çœç•¥  
        **ä¸çœç•¥ç‰ˆ**
        ```java
        // æŸServiceç±»ä¸‹

        // å±æ€§
        private Bean bean;

        // æ„é€ å™¨
        @Autowired
        public TestCarService(Car car) {
            this.car = car;
        }
        ```
        **çœç•¥ç‰ˆ**
        ```java
        // æŸServiceç±»ä¸‹

        // å±æ€§
        private Bean bean;

        // æ„é€ å™¨ï¼Œåªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨æ—¶ï¼Œå¯ä»¥çœç•¥   
        public TestCarService(Car car) {
            this.car = car;
        }
        ```

    - å‚æ•°ä½ç½®ï¼š
        ```java
        public void setBean(@Autowired Bean bean){
            this.bean = bean
        }
        ```

- **@Qualifier**
    - ä¸ @AutoWired é…åˆä½¿ç”¨ï¼Œå½“ç¯å¢ƒä¸­å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„ç»„ä»¶æ—¶ï¼Œä½¿ç”¨ @Qualifier æŒ‡å®šè¦åŠ è½½çš„

- **@Primary** 
    
    - è‡ªåŠ¨è£…é…æ—¶å…ˆè£…é…è¯¥æ³¨è§£æ ‡æ³¨çš„ç»„ä»¶
    
    - ä¸€èˆ¬ä¸ä¸ **@Qualifier** ä¸€èµ·ä½¿ç”¨

- åŠ è½½ä¼˜å…ˆçº§

    - å½“ @Configuration æ ‡æ³¨çš„é…ç½®ç±»ä¸‹ä¸ @ComponentScan æ‰«æçš„ç±»ä¸­æœ‰ç›¸åŒç±»å‹çš„ Beanï¼Œ**å…ˆåŠ è½½é…ç½®ç±»ä¸­çš„** 

#### [ğŸ‘‰å›åˆ°é¡¶éƒ¨](#Bean-è‡ªåŠ¨è£…é…ç¯‡)

### è‡ªåŠ¨è£…é… @Resource
- JSR250 è§„èŒƒ(Java è§„èŒƒ)ä¸­çš„

- ä¸ @AutoWired ä¸€æ ·å®ç°è‡ªåŠ¨è£…é…åŠŸèƒ½ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å±æ€§åç§°è£…é…çš„
    ```java
    // åŠ è½½çš„æ˜¯åç§°ä¸º testDao2 çš„ç»„ä»¶
    @Resource(name = "testDao2")
    TestDao testDao;
    ```

- ä¸æ”¯æŒ @Primary å’Œ @Qualifier ä¸€èµ·ä½¿ç”¨

#### [ğŸ‘‰å›åˆ°é¡¶éƒ¨](#Bean-è‡ªåŠ¨è£…é…ç¯‡)

### è‡ªåŠ¨è£…é… @Inject
- JSR330 è§„èŒƒ(Java è§„èŒƒ)ä¸­çš„

- ä¸ @AutoWired åŠŸèƒ½ä¸€æ ·ï¼Œæ²¡æœ‰ required å±æ€§

#### [ğŸ‘‰å›åˆ°é¡¶éƒ¨](#Bean-è‡ªåŠ¨è£…é…ç¯‡)

### [æ¥å£ "XXX"Aware]()
- å¼•ç”¨ Spring åº•å±‚ç»„ä»¶

#### [ğŸ‘‰å›åˆ°é¡¶éƒ¨](#Bean-è‡ªåŠ¨è£…é…ç¯‡)


### @Profile
- æŒ‡å®šç»„ä»¶åœ¨å“ªä¸ªç¯å¢ƒçš„æƒ…å†µä¸‹è¢«æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œä¸æŒ‡å®šæ—¶ï¼Œä»»ä½•ç¯å¢ƒéƒ½ä¼šæ³¨å†Œï¼ŒåŠ äº†è¯¥æ³¨è§£çš„ Bean ï¼Œåªæœ‰åœ¨ç›¸åº”ç¯å¢ƒä¸‹æ‰ä¼šè¢«æ³¨å†Œï¼Œé»˜è®¤æ˜¯ `default` ç¯å¢ƒï¼Œæ²¡æœ‰åŠ è¯¥æ³¨è§£çš„ Bean åœ¨ä»»ä½•ç¯å¢ƒä¸‹éƒ½ä¼šåŠ è½½

- å¦‚ä½•åˆ‡æ¢ç¯å¢ƒ
    - å‘½ä»¤è¡Œæ¨¡å¼ï¼šä¿®æ”¹è™šæ‹Ÿæœºé…ç½® `-Dspring.profiles.active=test`
    - ä»£ç ä¿®æ”¹æ¨¡å¼ï¼š
        ```java
        AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext();
        // ä¿®æ”¹ç¯å¢ƒä¸º test æ¨¡å¼
        applicationContext.getEnvironment().setActiveProfiles("test");
        applicationContext.register(ProfileConfig.class);
        applicationContext.refresh();
        ``` 
- ä½ç½®ï¼š
    - æ³¨è§£åŠ åœ¨ç±»ä¸Šæ—¶ï¼Œå½“ç¬¦åˆè§„å®šç¯å¢ƒæ—¶ï¼Œæ•´ä¸ªç±»çš„æ‰€æœ‰é…ç½®æ‰ä¼šåŠ è½½ï¼ŒåŠ è½½ç›¸åº”ç¯å¢ƒä¸‹çš„é…ç½®    

#### [ğŸ‘‰å›åˆ°é¡¶éƒ¨](#Bean-è‡ªåŠ¨è£…é…ç¯‡)
